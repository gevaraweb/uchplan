<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
	<head>
		<link rel="stylesheet" type="text/css" href="tablestyle.css">
		<title>Чтение учебного плана для РУП</title>
		<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js?ver=4.9.2'></script>
		<script type="text/javascript" src="xml_samples.js"></script>
        <script type="text/javascript" src="../jssaxparser/AttributesImpl.js"></script>
        <script type="text/javascript" src="../jssaxparser/NamespaceSupport.js"></script>
        <script type="text/javascript" src="../jssaxparser/sax.js"></script>
        <script type="text/javascript" src="../jssaxparser/DummyContentHandler3.js"></script>
		<script type="text/javascript" src="../js/__jquery.tablesorter.min.js"></script>

		<script type="text/javascript">
		
		var xml = loadXml(); var textParsed = "";
		
		function check() {
		
			var e = document.getElementById("ddlViewBy");
			kursSelNumber = parseInt( e.options[e.selectedIndex].value );
			
			var textarea = document.getElementById("xml");
			var div = document.getElementById("msg");
                        div.innerHTML = "";
			var contentHandler = new DummyContentHandler(div);
			var saxParser = new SAXParser(contentHandler, contentHandler, contentHandler, contentHandler, contentHandler);
                      //  saxParser.parseString(textarea.value);
						saxParser.parseString( textParsed );
						
		}
		
		$(document).ready(function() {
			/*
			   $.ajax({
				   url : "xml/oop.xml",
				   dataType: "text",
				   success : function (data) {
					   //$("#xml").text(data);
					   textParsed  = data;
				   }
			   });
			   */
			   
		function readSingleFile(e) {
			  var file = e.target.files[0];
			  if (!file) {
				return;
			  }
			  var reader = new FileReader();
			  reader.onload = function(e) {
				var contents = e.target.result;
				displayContents(contents);
			  };
			  reader.readAsText(file);
			}

			function displayContents(contents) {
			  textParsed = contents;
			}

			document.getElementById('file-input').addEventListener('change', readSingleFile, false);				
			
			   
		}); 	
				
		</script>
		
	</head>
	
	<body>
		<div>
			<input type="file" id="file-input" />
		</div>
		<br>
	<div>		
		<select id="ddlViewBy" >
			  <option value="1" selected="selected">первый курс</option>
			  <option value="2">второй курс</option>
			  <option value="3">третий курс</option>
			  <option value="4">четвертый курс</option>			  
			  <option value="5">пятый курс</option>
			  <option value="6">шестой курс</option>			  
			  
		</select>
	</div>

<br>
		<div>
			<input type="button" onclick="check()" value="start"/>
		</div>
		<br>
				<div id="msg"></div>
	</body>
</html>
